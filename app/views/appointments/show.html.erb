<%# app/views/appointments/show.html.erb %>


<div class="container py-4">
  <!-- nav -->
  <div class="d-flex align-items-center mb-4">
    <%= link_to appointments_path, class: "btn btn-link text-decoration-none me-3" do %>
      <i class="fas fa-arrow-left"></i>
    <% end %>

    <h1 class="h4 mb-0 flex-grow-1 text-truncate">
      <%= @appointment.title %>
    </h1>
<%# dropdown menu removed %>

  </div>

  <!-- card style du dashboard-section -->
  <div class="dashboard-section">
    <!-- info  -->
    <div class="mb-4">
      <div class="d-flex align-items-center mb-3">
        <i class="fas fa-calendar-day text-primary me-3 fs-5"></i>
        <div>
          <p class="text-muted small mb-1">Date</p>
          <p class="mb-0 fw-bold"><%= @appointment.date %></p>
        </div>
      </div>

      <div class="d-flex align-items-center mb-3">
        <i class="fas fa-tag text-primary me-3 fs-5"></i>
        <div>
          <p class="text-muted small mb-1">Type</p>
          <p class="mb-0 fw-bold">
            <span class="badge bg-<%= appointment_type_color(@appointment.event_type) %>">
              <%= @appointment.event_type %>
            </span>
          </p>
        </div>
      </div>

      <% if @appointment.address.present? %>
        <div class="d-flex align-items-start mb-3">
          <i class="fas fa-map-marker-alt text-primary me-3 fs-5 mt-1"></i>
          <div>
            <p class="text-muted small mb-1">Adresse</p>
            <p class="mb-0"><%= @appointment.address %></p>
          </div>
        </div>
      <% end %>
    </div>

    <!-- descrip-->
    <% if @appointment.content.present? %>
      <div class="mb-4">
        <div class="d-flex align-items-start">
          <i class="fas fa-sticky-note text-primary me-3 fs-5 mt-1"></i>
          <div class="flex-grow-1">
            <p class="text-muted small mb-1">Notes</p>
            <div class="bg-light p-3 rounded">
              <%= simple_format(@appointment.content) %>
            </div>
          </div>
        </div>
      </div>
    <% end %>

    <!-- bottom info-->
    <div class="border-top pt-3 mt-3">
      <div class="text-muted small">
        <i class="fas fa-clock me-1"></i>
        Crée <%= time_ago_in_words(@appointment.created_at) %>
      </div>
    </div>
  </div>

  <!-- btns -->
  <div class="mt-4 d-flex gap-2">
    <%= link_to edit_appointment_path(@appointment),
                class: "btn btn-primary flex-grow-1" do %>
      <i class="fas fa-edit me-2"></i>
      Modifier
    <% end %>

    <%= link_to appointments_path,
                class: "btn btn-outline-secondary flex-grow-1" do %>
      <i class="fas fa-list me-2"></i>
      Les Evènements
    <% end %>

    <%= link_to @appointment,
                method: :delete,
                data: {
                  turbo_method: :delete,
                  turbo_confirm: "Êtes-vous sûr de vouloir supprimer cet événement ?"
                },
                class: "btn btn-outline flex-grow-1" do %>
      <i class="fas fa-trash me-2"></i>
      Supprimer
    <% end %>
  </div>
</div>
