<%= form_for @user, url: wizard_path, method: :put, html: { class: "onboarding-form" } do |f| %>

<h2>Informations personnelles</h2>

  <p>
    <%= f.label :date_of_birth, "Date de naissance" %><br>
    <%= f.date_field :date_of_birth %>
  </p>

  <p>
    <%= f.label :gender, "Identité de genre" %><br>
    <%= f.select :gender, ["Homme", "Femme", "Non-binaire", "Agenre", "Autre (à préciser)"], {}, { id: "gender_select" } %>
  </p>

  <p id="gender_other_container" style="display:none;">
    <%= f.text_field :gender_other, maxlength: 150, placeholder: "Précisez votre identité de genre" %>
  </p>

  <p>
    <%= f.label :birth_sex, "Sexe de naissance" %><br>
    <%= f.select :birth_sex, ["XY", "XX", "Intersexué·e (à préciser)"], {}, { id: "birth_sex_select" } %>
  </p>

  <p id="birth_sex_other_container" style="display:none;">
    <%= f.text_field :birth_sex_other, maxlength: 3000, placeholder: "Précisez votre sexe de naissance" %>
  </p>

  <div class="actions">
    <%= link_to "Back", previous_wizard_path, class: "btn home-btn-secondary" %>
    <%= f.submit "Next", class: "btn home-btn-primary" %>
  </div>

<% end %>

<style>
.actions .home-btn-primary {
  padding: 12px 28px;
  font-size: 1.1rem;
  background: linear-gradient(135deg, #C4937A 0%, #D4AE9A 100%);
  border-color: #C97C63;
}
</style>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const genderSelect = document.getElementById("gender_select");
  const genderOther = document.getElementById("gender_other_container");

  const birthSexSelect = document.getElementById("birth_sex_select");
  const birthSexOther = document.getElementById("birth_sex_other_container");

  function toggleGenderOther() {
    genderOther.style.display = genderSelect.value === "Autre (à préciser)" ? "block" : "none";
  }

  function toggleBirthSexOther() {
    birthSexOther.style.display = birthSexSelect.value === "Intersexué·e (à préciser)" ? "block" : "none";
  }

  genderSelect.addEventListener("change", toggleGenderOther);
  birthSexSelect.addEventListener("change", toggleBirthSexOther);

  toggleGenderOther();
  toggleBirthSexOther();
});
</script>
