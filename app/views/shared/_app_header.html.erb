<%# app/views/shared/_app_header.html.erb %>

<header class="app-header">
  <div class="app-header-content">
    <%# Logo + App Name - aligné à gauche %>
    <div class="app-brand">
      <div class="app-logo">
        <%= image_tag "logo_S4M.png", width: 28, height: 28, alt: "Logo" %>
      </div>

      <div class="app-name">
        <span>Space 4 Me</span>
      </div>
    </div>

    <%# Menu hamburger à droite %>
    <div class="app-menu" data-controller="dropdown">
      <button class="menu-toggle"
              data-action="click->dropdown#toggle click@window->dropdown#hide"
              data-dropdown-target="trigger">
        <i class="fas fa-ellipsis-v"></i>
      </button>

      <div class="dropdown-menu" data-dropdown-target="menu">
        <div class="dropdown-header">
          <div class="user-info">
            <div class="user-avatar">
              <%= user_avatar_text %>
            </div>
            <div class="user-details">
              <strong><%= user_display_name %></strong>
              <% if user_signed_in? %>
                <small><%= current_user.email %></small>
              <% end %>
            </div>
          </div>
        </div>

        <div class="dropdown-divider"></div>

        <!-- partial -->
        <%= render "shared/user_menu" %>

        <% if user_signed_in? %>
          <div class="dropdown-divider"></div>
          <%= link_to destroy_user_session_path,
                      data: { turbo_method: :delete },
                      class: "dropdown-item logout-item" do %>
            <i class="fas fa-sign-out-alt"></i>
            <span>Déconnexion</span>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>
</header>
